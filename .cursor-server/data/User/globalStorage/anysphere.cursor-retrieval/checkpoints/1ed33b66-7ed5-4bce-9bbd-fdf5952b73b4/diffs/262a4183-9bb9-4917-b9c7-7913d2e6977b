{"fsPath":"\\home\\hendo420\\soraFeed\\src\\components\\VideoFeed.tsx","fileUuid":"262a4183-9bb9-4917-b9c7-7913d2e6977b","fileSizeBytes":5102,"numLines":173,"diffChanges":[{"originalStartLineNumberOneIndexed":1,"originalEndLineNumberExclusiveOneIndexed":1,"modifiedStartLineNumberOneIndexed":1,"modifiedEndLineNumberExclusiveOneIndexed":174,"addedLines":["'use client';","","import { useState, useEffect, useRef } from 'react';","import { motion, AnimatePresence } from 'framer-motion';","import { ChevronUp, ChevronDown } from 'lucide-react';","import { SoraFeedItem } from '@/types/sora';","import VideoPost from './VideoPost';","","interface VideoFeedProps {","  items: SoraFeedItem[];","}","","export default function VideoFeed({ items }: VideoFeedProps) {","  const [currentIndex, setCurrentIndex] = useState(0);","  const [isScrolling, setIsScrolling] = useState(false);","  const containerRef = useRef<HTMLDivElement>(null);","  const touchStartY = useRef<number>(0);","  const touchEndY = useRef<number>(0);","","  const goToNext = () => {","    if (currentIndex < items.length - 1) {","      setCurrentIndex(currentIndex + 1);","    }","  };","","  const goToPrevious = () => {","    if (currentIndex > 0) {","      setCurrentIndex(currentIndex - 1);","    }","  };","","  const handleWheel = (e: WheelEvent) => {","    if (isScrolling) return;","    ","    setIsScrolling(true);","    ","    if (e.deltaY > 0) {","      goToNext();","    } else {","      goToPrevious();","    }","    ","    setTimeout(() => setIsScrolling(false), 500);","  };","","  const handleTouchStart = (e: TouchEvent) => {","    touchStartY.current = e.touches[0].clientY;","  };","","  const handleTouchMove = (e: TouchEvent) => {","    touchEndY.current = e.touches[0].clientY;","  };","","  const handleTouchEnd = () => {","    if (isScrolling) return;","    ","    const deltaY = touchStartY.current - touchEndY.current;","    const minSwipeDistance = 50;","    ","    if (Math.abs(deltaY) > minSwipeDistance) {","      setIsScrolling(true);","      ","      if (deltaY > 0) {","        goToNext();","      } else {","        goToPrevious();","      }","      ","      setTimeout(() => setIsScrolling(false), 500);","    }","  };","","  const handleKeyDown = (e: KeyboardEvent) => {","    if (isScrolling) return;","    ","    if (e.key === 'ArrowDown' || e.key === ' ') {","      e.preventDefault();","      setIsScrolling(true);","      goToNext();","      setTimeout(() => setIsScrolling(false), 500);","    } else if (e.key === 'ArrowUp') {","      e.preventDefault();","      setIsScrolling(true);","      goToPrevious();","      setTimeout(() => setIsScrolling(false), 500);","    }","  };","","  useEffect(() => {","    const container = containerRef.current;","    if (!container) return;","","    container.addEventListener('wheel', handleWheel, { passive: false });","    container.addEventListener('touchstart', handleTouchStart, { passive: true });","    container.addEventListener('touchmove', handleTouchMove, { passive: true });","    container.addEventListener('touchend', handleTouchEnd, { passive: true });","    window.addEventListener('keydown', handleKeyDown);","","    return () => {","      container.removeEventListener('wheel', handleWheel);","      container.removeEventListener('touchstart', handleTouchStart);","      container.removeEventListener('touchmove', handleTouchMove);","      container.removeEventListener('touchend', handleTouchEnd);","      window.removeEventListener('keydown', handleKeyDown);","    };","  }, [currentIndex, isScrolling]);","","  return (","    <div ","      ref={containerRef}","      className=\"relative w-full h-screen overflow-hidden bg-black\"","      tabIndex={0}","    >","      <AnimatePresence mode=\"wait\">","        <motion.div","          key={currentIndex}","          initial={{ y: '100%' }}","          animate={{ y: 0 }}","          exit={{ y: '-100%' }}","          transition={{ ","            type: 'tween',","            duration: 0.5,","            ease: 'easeInOut'","          }}","          className=\"absolute inset-0\"","        >","          <VideoPost ","            item={items[currentIndex]} ","            isActive={true}","            onNext={goToNext}","            onPrevious={goToPrevious}","          />","        </motion.div>","      </AnimatePresence>","","      {/* Navigation Arrows - Desktop */}","      <div className=\"hidden md:flex absolute right-4 top-1/2 transform -translate-y-1/2 flex-col gap-4 z-20\">","        <button","          onClick={goToPrevious}","          disabled={currentIndex === 0}","          className=\"p-3 rounded-full bg-black/50 text-white hover:bg-black/70 disabled:opacity-30 disabled:cursor-not-allowed transition-all\"","        >","          <ChevronUp size={24} />","        </button>","        <button","          onClick={goToNext}","          disabled={currentIndex === items.length - 1}","          className=\"p-3 rounded-full bg-black/50 text-white hover:bg-black/70 disabled:opacity-30 disabled:cursor-not-allowed transition-all\"","        >","          <ChevronDown size={24} />","        </button>","      </div>","","      {/* Progress Indicator */}","      <div className=\"absolute right-2 top-1/2 transform -translate-y-1/2 flex flex-col gap-1 z-20\">","        {items.map((_, index) => (","          <div","            key={index}","            className={`w-1 h-8 rounded-full transition-all duration-300 ${","              index === currentIndex ? 'bg-white' : 'bg-white/30'","            }`}","          />","        ))}","      </div>","","      {/* Swipe Hint - Mobile */}","      <div className=\"md:hidden absolute bottom-4 left-1/2 transform -translate-x-1/2 text-white/70 text-sm z-20\">","        Swipe up/down to navigate","      </div>","    </div>","  );","}",""],"tokenizedAddedLines":[1000000,1000001,1000002,1000003,1000004,1000005,1000006,1000001,1000007,1000008,1000009,1000001,1000010,1000011,1000012,1000013,1000014,1000015,1000001,1000016,1000017,1000018,1000019,1000020,1000001,1000021,1000022,1000023,1000019,1000020,1000001,1000024,1000025,1000026,1000027,1000026,1000028,1000029,1000030,1000031,1000019,1000026,1000032,1000020,1000001,1000033,1000034,1000020,1000001,1000035,1000036,1000020,1000001,1000037,1000025,1000026,1000038,1000039,1000026,1000040,1000041,1000042,1000043,1000044,1000045,1000046,1000047,1000042,1000048,1000019,1000020,1000001,1000049,1000025,1000026,1000050,1000051,1000041,1000029,1000048,1000052,1000051,1000041,1000031,1000048,1000019,1000020,1000001,1000053,1000054,1000055,1000001,1000056,1000057,1000058,1000059,1000060,1000001,1000061,1000062,1000063,1000064,1000065,1000066,1000067,1000068,1000001,1000069,1000070,1000071,1000072,1000073,1000074,1000075,1000076,1000077,1000078,1000079,1000080,1000081,1000082,1000083,1000084,1000085,1000086,1000087,1000088,1000089,1000090,1000091,1000092,1000093,1000094,1000095,1000001,1000096,1000097,1000098,1000099,1000100,1000101,1000087,1000102,1000103,1000098,1000104,1000105,1000101,1000087,1000106,1000103,1000107,1000001,1000108,1000109,1000110,1000111,1000112,1000113,1000114,1000115,1000093,1000116,1000107,1000001,1000117,1000118,1000119,1000107,1000120,1000121,1000009,1000001]}],"gitInfo":{"noRepoFound":true},"kind":"KIND_ADDED"}