{"fsPath":"\\home\\hendo420\\soraFeed\\scripts\\scanner.js","fileUuid":"d0397f5a-0a19-4d3d-9183-7e8396fc3152","fileSizeBytes":11330,"numLines":390,"diffChanges":[{"originalStartLineNumberOneIndexed":67,"originalEndLineNumberExclusiveOneIndexed":68,"modifiedStartLineNumberOneIndexed":67,"modifiedEndLineNumberExclusiveOneIndexed":86,"addedLines":["    // Create creators table","    await client.query(`","      CREATE TABLE IF NOT EXISTS creators (","        id TEXT PRIMARY KEY,","        username TEXT NOT NULL,","        display_name TEXT,","        profile_picture_url TEXT,","        permalink TEXT,","        follower_count INTEGER DEFAULT 0,","        following_count INTEGER DEFAULT 0,","        post_count INTEGER DEFAULT 0,","        verified BOOLEAN DEFAULT false,","        first_seen TIMESTAMP DEFAULT CURRENT_TIMESTAMP,","        last_updated TIMESTAMP DEFAULT CURRENT_TIMESTAMP,","        UNIQUE(username)","      );","    `);","","    // Create posts table (normalized schema)"],"tokenizedAddedLines":[1000255,60,1000256,62,1000257,1000258,1000259,71,1000260,1000261,1000262,1000263,1000264,73,1000265,75,76,4,1000266]},{"originalStartLineNumberOneIndexed":71,"originalEndLineNumberExclusiveOneIndexed":73,"modifiedStartLineNumberOneIndexed":89,"modifiedEndLineNumberExclusiveOneIndexed":90,"addedLines":["        creator_id TEXT NOT NULL REFERENCES creators(id),"],"tokenizedAddedLines":[1000267]},{"originalStartLineNumberOneIndexed":74,"originalEndLineNumberExclusiveOneIndexed":75,"modifiedStartLineNumberOneIndexed":91,"modifiedEndLineNumberExclusiveOneIndexed":92,"addedLines":["        posted_at BIGINT NOT NULL,"],"tokenizedAddedLines":[1000268]},{"originalStartLineNumberOneIndexed":76,"originalEndLineNumberExclusiveOneIndexed":76,"modifiedStartLineNumberOneIndexed":93,"modifiedEndLineNumberExclusiveOneIndexed":106,"addedLines":["        permalink TEXT NOT NULL,","        ","        -- Video metadata","        video_url TEXT,","        video_url_md TEXT,","        thumbnail_url TEXT,","        gif_url TEXT,","        width INTEGER,","        height INTEGER,","        generation_id TEXT,","        task_id TEXT,","        ","        -- Engagement metrics"],"tokenizedAddedLines":[1000269,1000270,1000271,1000272,1000273,1000274,1000275,1000276,1000277,1000278,1000279,1000270,1000280]},{"originalStartLineNumberOneIndexed":79,"originalEndLineNumberExclusiveOneIndexed":80,"modifiedStartLineNumberOneIndexed":109,"modifiedEndLineNumberExclusiveOneIndexed":111,"addedLines":["        ","        -- Tracking"],"tokenizedAddedLines":[1000270,1000281]},{"originalStartLineNumberOneIndexed":81,"originalEndLineNumberExclusiveOneIndexed":83,"modifiedStartLineNumberOneIndexed":112,"modifiedEndLineNumberExclusiveOneIndexed":113,"addedLines":["        last_updated TIMESTAMP DEFAULT CURRENT_TIMESTAMP"],"tokenizedAddedLines":[1000282]},{"originalStartLineNumberOneIndexed":86,"originalEndLineNumberExclusiveOneIndexed":87,"modifiedStartLineNumberOneIndexed":116,"modifiedEndLineNumberExclusiveOneIndexed":130,"addedLines":["    // Create indexes for creators","    await client.query(`","      CREATE INDEX IF NOT EXISTS idx_creators_username ON creators(username);","    `);","","    await client.query(`","      CREATE INDEX IF NOT EXISTS idx_creators_verified ON creators(verified) WHERE verified = true;","    `);","","    // Create indexes for posts","    await client.query(`","      CREATE INDEX IF NOT EXISTS idx_posts_creator_id ON sora_posts(creator_id);","    `);",""],"tokenizedAddedLines":[1000283,60,1000284,76,4,60,1000285,76,4,1000286,60,1000287,76,4]},{"originalStartLineNumberOneIndexed":88,"originalEndLineNumberExclusiveOneIndexed":89,"modifiedStartLineNumberOneIndexed":131,"modifiedEndLineNumberExclusiveOneIndexed":132,"addedLines":["      CREATE INDEX IF NOT EXISTS idx_posts_posted_at ON sora_posts(posted_at DESC);"],"tokenizedAddedLines":[1000288]},{"originalStartLineNumberOneIndexed":92,"originalEndLineNumberExclusiveOneIndexed":93,"modifiedStartLineNumberOneIndexed":135,"modifiedEndLineNumberExclusiveOneIndexed":136,"addedLines":["      CREATE INDEX IF NOT EXISTS idx_posts_indexed_at ON sora_posts(indexed_at DESC);"],"tokenizedAddedLines":[1000289]},{"originalStartLineNumberOneIndexed":97,"originalEndLineNumberExclusiveOneIndexed":98,"modifiedStartLineNumberOneIndexed":140,"modifiedEndLineNumberExclusiveOneIndexed":141,"addedLines":["      CREATE INDEX IF NOT EXISTS idx_posts_text_fts ON sora_posts USING gin(to_tsvector('english', COALESCE(text, '')));"],"tokenizedAddedLines":[1000290]},{"originalStartLineNumberOneIndexed":103,"originalEndLineNumberExclusiveOneIndexed":104,"modifiedStartLineNumberOneIndexed":146,"modifiedEndLineNumberExclusiveOneIndexed":147,"addedLines":["        CREATE INDEX IF NOT EXISTS idx_posts_text_trgm "],"tokenizedAddedLines":[1000291]}],"gitInfo":{"noRepoFound":true},"kind":"KIND_MODIFIED"}