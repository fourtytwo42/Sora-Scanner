{"fsPath":"\\home\\hendo420\\soraFeed\\src\\components\\VideoPost.tsx","fileUuid":"28d92a33-fd7c-4872-a397-17c92976ac09","fileSizeBytes":34635,"numLines":926,"diffChanges":[{"originalStartLineNumberOneIndexed":6,"originalEndLineNumberExclusiveOneIndexed":7,"modifiedStartLineNumberOneIndexed":6,"modifiedEndLineNumberExclusiveOneIndexed":7,"addedLines":["import { Play, Pause, Volume2, VolumeX, Heart, Share, User, CheckCircle, ChevronLeft, ChevronRight, MoreHorizontal, Download } from 'lucide-react';"],"tokenizedAddedLines":[1000575]},{"originalStartLineNumberOneIndexed":468,"originalEndLineNumberExclusiveOneIndexed":468,"modifiedStartLineNumberOneIndexed":468,"modifiedEndLineNumberExclusiveOneIndexed":518,"addedLines":["","  // Download video function","  const downloadVideo = useCallback(async () => {","    const currentItem = getCurrentItem();","    const videoUrl = currentItem.post.attachments[0]?.encodings?.source?.path || ","                     currentItem.post.attachments[0]?.encodings?.md?.path;","    ","    if (!videoUrl) {","      console.error('No video URL found for download');","      return;","    }","","    try {","      console.log('üîΩ Starting video download for:', currentItem.post.id);","      ","      // Fetch the video as a blob","      const response = await fetch(videoUrl);","      if (!response.ok) {","        throw new Error(`Failed to fetch video: ${response.status}`);","      }","      ","      const blob = await response.blob();","      ","      // Create download link","      const url = window.URL.createObjectURL(blob);","      const link = document.createElement('a');","      link.href = url;","      ","      // Generate filename","      const username = currentItem.profile.username || 'sora';","      const timestamp = new Date().toISOString().slice(0, 19).replace(/:/g, '-');","      const extension = videoUrl.includes('.mp4') ? 'mp4' : 'webm';","      link.download = `sora-${username}-${timestamp}.${extension}`;","      ","      // Trigger download","      document.body.appendChild(link);","      link.click();","      document.body.removeChild(link);","      ","      // Clean up","      window.URL.revokeObjectURL(url);","      ","      console.log('‚úÖ Video download completed');","    } catch (error) {","      console.error('‚ùå Failed to download video:', error);","      ","      // Fallback: open video in new tab","      window.open(videoUrl, '_blank');","    }","  }, [getCurrentItem]);"],"tokenizedAddedLines":[2,1000576,1000577,1000578,1000579,1000580,223,1000581,1000582,1000583,40,2,110,1000584,163,1000585,1000586,1000587,1000588,83,163,1000589,163,1000590,1000591,1000592,1000593,163,1000594,1000595,1000596,1000597,1000598,163,1000599,1000600,1000601,1000602,163,1000603,1000604,163,1000605,116,1000606,163,1000607,1000608,40,1000609]},{"originalStartLineNumberOneIndexed":672,"originalEndLineNumberExclusiveOneIndexed":672,"modifiedStartLineNumberOneIndexed":722,"modifiedEndLineNumberExclusiveOneIndexed":734,"addedLines":["","                {/* Download Button */}","                <button","                  onClick={(e) => {","                    e.stopPropagation();","                    downloadVideo();","                  }}","                  className=\"p-2.5 rounded-full bg-black/50 backdrop-blur-sm text-white hover:bg-black/70 transition-all\"","                  title=\"Download video\"","                >","                  <Download size={20} />","                </button>"],"tokenizedAddedLines":[2,1000610,423,353,354,1000611,351,443,1000612,359,1000613,439]}],"gitInfo":{"noRepoFound":true},"kind":"KIND_MODIFIED"}