{"fsPath":"\\home\\hendo420\\soraFeed\\src\\components\\FeedLoader.tsx","fileUuid":"d9f6f3dc-4ef4-4916-b12e-505bc785213e","fileSizeBytes":11890,"numLines":364,"diffChanges":[{"originalStartLineNumberOneIndexed":11,"originalEndLineNumberExclusiveOneIndexed":12,"modifiedStartLineNumberOneIndexed":11,"modifiedEndLineNumberExclusiveOneIndexed":12,"addedLines":["type FeedType = 'latest' | 'top' | 'favorites' | 'search';"],"tokenizedAddedLines":[1000182]},{"originalStartLineNumberOneIndexed":21,"originalEndLineNumberExclusiveOneIndexed":21,"modifiedStartLineNumberOneIndexed":21,"modifiedEndLineNumberExclusiveOneIndexed":23,"addedLines":["  const [searchQuery, setSearchQuery] = useState('');","  const [searchInput, setSearchInput] = useState('');"],"tokenizedAddedLines":[1000183,1000184]},{"originalStartLineNumberOneIndexed":95,"originalEndLineNumberExclusiveOneIndexed":95,"modifiedStartLineNumberOneIndexed":97,"modifiedEndLineNumberExclusiveOneIndexed":124,"addedLines":["      ","      // Handle search feed","      if (type === 'search') {","        if (!searchQuery || searchQuery.trim().length === 0) {","          setItems([]);","          setLoading(false);","          setHasMore(false);","          return;","        }","        ","        const response = await fetch(`/api/search?q=${encodeURIComponent(searchQuery)}&limit=50`);","        if (!response.ok) {","          throw new Error('Failed to search database');","        }","        const data = await response.json();","        console.log('✅ Loaded', data.items?.length || 0, 'search results');","        ","        if (reset) {","          setItems(data.items || []);","        } else {","          setItems(prev => [...prev, ...(data.items || [])]);","        }","        setCursor(null);","        setHasMore(false); // No pagination for search yet","        setLoading(false);","        return;","      }"],"tokenizedAddedLines":[59,1000185,1000186,1000187,1000188,1000189,89,1000190,68,81,1000191,1000192,1000193,68,1000194,1000195,81,64,1000196,66,1000197,68,56,1000198,70,71,43]},{"originalStartLineNumberOneIndexed":180,"originalEndLineNumberExclusiveOneIndexed":180,"modifiedStartLineNumberOneIndexed":209,"modifiedEndLineNumberExclusiveOneIndexed":241,"addedLines":["","  const handleSearch = async () => {","    if (searchInput.trim().length === 0) return;","    setSearchQuery(searchInput.trim());","    setFeedType('search');","    setLoading(true);","    setError(null);","    setCursor(null);","    setHasMore(false);","    ","    try {","      const response = await fetch(`/api/search?q=${encodeURIComponent(searchInput.trim())}&limit=50`);","      if (!response.ok) {","        throw new Error('Failed to search database');","      }","      const data = await response.json();","      console.log('✅ Loaded', data.items?.length || 0, 'search results');","      setItems(data.items || []);","    } catch (err) {","      console.error('❌ Search error:', err);","      setError(err instanceof Error ? err.message : 'Search failed');","      setItems([]);","    } finally {","      setLoading(false);","    }","  };","","  const handleSearchKeyPress = (e: React.KeyboardEvent) => {","    if (e.key === 'Enter') {","      handleSearch();","    }","  };"],"tokenizedAddedLines":[2,1000199,1000200,1000201,1000202,1000203,1000204,1000205,1000206,105,22,1000207,1000208,1000209,43,1000210,1000211,1000212,93,1000213,1000214,1000215,102,1000216,28,29,2,1000217,1000218,1000219,28,29]},{"originalStartLineNumberOneIndexed":226,"originalEndLineNumberExclusiveOneIndexed":227,"modifiedStartLineNumberOneIndexed":287,"modifiedEndLineNumberExclusiveOneIndexed":289,"addedLines":["      <div className=\"fixed top-6 left-6 z-50 flex flex-col gap-3\">","        <div className=\"flex bg-black/50 rounded-full p-1 backdrop-blur-sm\">"],"tokenizedAddedLines":[1000220,1000221]},{"originalStartLineNumberOneIndexed":257,"originalEndLineNumberExclusiveOneIndexed":257,"modifiedStartLineNumberOneIndexed":319,"modifiedEndLineNumberExclusiveOneIndexed":350,"addedLines":["          <button","            onClick={() => handleFeedTypeChange('search')}","            className={`px-4 py-2 rounded-full text-sm font-medium transition-all ${","              feedType === 'search'","                ? 'bg-white text-black'","                : 'text-white hover:bg-white/20'","            }`}","          >","            Search","          </button>","        </div>","","        {/* Search Input - Only show when search is selected */}","        {feedType === 'search' && (","          <div className=\"flex gap-2 bg-black/50 rounded-full p-1 backdrop-blur-sm\">","            <input","              type=\"text\"","              value={searchInput}","              onChange={(e) => setSearchInput(e.target.value)}","              onKeyPress={handleSearchKeyPress}","              placeholder=\"Search videos...\"","              className=\"px-4 py-2 bg-white/10 text-white placeholder-white/50 rounded-full text-sm focus:outline-none focus:bg-white/20 min-w-[300px]\"","            />","            <button","              onClick={handleSearch}","              className=\"px-6 py-2 bg-white text-black rounded-full text-sm font-medium hover:bg-gray-200 transition-colors\"","            >","              Search","            </button>","          </div>","        )}"],"tokenizedAddedLines":[1000222,1000223,1000224,1000225,1000226,1000227,1000228,142,1000229,144,130,2,1000230,1000231,1000232,1000233,1000234,1000235,1000236,1000237,1000238,1000239,1000240,1000241,1000242,1000243,1000244,1000245,1000246,1000247,1000248]}],"gitInfo":{"noRepoFound":true},"kind":"KIND_MODIFIED"}