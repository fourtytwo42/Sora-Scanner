{"fsPath":"\\home\\hendo420\\soraFeed\\src\\hooks\\useGestureRails.ts","fileUuid":"26e4cb4f-1fb2-4b8e-a856-bb3c3ef5479b","fileSizeBytes":2765,"numLines":102,"diffChanges":[{"originalStartLineNumberOneIndexed":1,"originalEndLineNumberExclusiveOneIndexed":1,"modifiedStartLineNumberOneIndexed":1,"modifiedEndLineNumberExclusiveOneIndexed":103,"addedLines":["import { useCallback, useRef, useState } from 'react';","","export type GestureDirection = 'vertical' | 'horizontal' | null;","","interface GestureState {","  direction: GestureDirection;","  isActive: boolean;","  startX: number;","  startY: number;","  threshold: number;","}","","export function useGestureRails(threshold: number = 15) {","  const [gestureState, setGestureState] = useState<GestureState>({","    direction: null,","    isActive: false,","    startX: 0,","    startY: 0,","    threshold","  });","","  const gestureRef = useRef<GestureState>(gestureState);","  gestureRef.current = gestureState;","","  const startGesture = useCallback((clientX: number, clientY: number) => {","    const newState: GestureState = {","      direction: null,","      isActive: true,","      startX: clientX,","      startY: clientY,","      threshold","    };","    setGestureState(newState);","    gestureRef.current = newState;","  }, [threshold]);","","  const updateGesture = useCallback((clientX: number, clientY: number): GestureDirection => {","    const state = gestureRef.current;","    if (!state.isActive) return null;","","    const deltaX = Math.abs(clientX - state.startX);","    const deltaY = Math.abs(clientY - state.startY);","","    // Only determine direction once we've moved past the threshold","    if (deltaX > state.threshold || deltaY > state.threshold) {","      let direction: GestureDirection = null;","      ","      if (state.direction === null) {","        // Determine initial direction based on which axis has more movement","        if (deltaX > deltaY) {","          direction = 'horizontal';","        } else if (deltaY > deltaX) {","          direction = 'vertical';","        }","        ","        if (direction) {","          const newState = { ...state, direction };","          setGestureState(newState);","          gestureRef.current = newState;","        }","      } else {","        direction = state.direction;","      }","      ","      return direction;","    }","","    return state.direction;","  }, []);","","  const endGesture = useCallback(() => {","    const newState: GestureState = {","      direction: null,","      isActive: false,","      startX: 0,","      startY: 0,","      threshold","    };","    setGestureState(newState);","    gestureRef.current = newState;","  }, [threshold]);","","  const isGestureActive = useCallback((direction: GestureDirection): boolean => {","    const state = gestureRef.current;","    return state.isActive && (state.direction === direction || state.direction === null);","  }, []);","","  const shouldBlockGesture = useCallback((direction: GestureDirection): boolean => {","    const state = gestureRef.current;","    return state.isActive && state.direction !== null && state.direction !== direction;","  }, []);","","  return {","    gestureState,","    startGesture,","    updateGesture,","    endGesture,","    isGestureActive,","    shouldBlockGesture","  };","}",""],"tokenizedAddedLines":[1000000,1000001,1000002,1000001,1000003,1000004,1000005,1000006,1000007,1000008,1000009,1000001,1000010,1000011,1000012,1000013,1000014,1000015,1000016,1000017,1000001,1000018,1000019,1000001,1000020,1000021,1000022,1000023,1000024,1000025,1000026,1000027,1000028,1000029,1000030,1000001,1000031,1000032,1000033,1000001,1000034,1000035,1000001,1000036,1000037,1000038,1000039,1000040,1000041,1000042,1000043,1000044,1000045,1000046,1000047,1000048,1000049,1000050,1000051,1000046,1000052,1000053,1000054,1000039,1000055,1000056,1000001,1000057,1000058,1000001,1000059,1000021,1000022,1000060,1000061,1000062,1000026,1000027,1000028,1000029,1000030,1000001,1000063,1000032,1000064,1000058,1000001,1000065,1000032,1000066,1000058,1000001,1000067,1000068,1000069,1000070,1000071,1000072,1000073,1000074,1000009,1000001]}],"gitInfo":{"noRepoFound":true},"kind":"KIND_ADDED"}